---
title: 2장 Vue 인스턴스
date: 2020-02-19
tags: ['Vue 인스턴스', 'Vue 라이프사이클']
series: true
cover_image: ./images/lifecycle.png
canonical_url: false
description: "루트 Vue 인스턴스 : 모든 Vue 애플리케이션의 중심에 있는 것. 그냥 Vue 인스턴스라고도 합니다. Vue 생성자인 new Vue()로 생성 가능합니다. Vue 생성자는 HTML 서식을 컴파일하고, 인스턴스 데이터를 초기화하고, 데이터를 생성하고, 상호 작용을 가능케 하는 이벤트들을 바인딩하면서 애플리케이션을 가동시킵니다..."
---

## 2.1 Vue 인스턴스

**루트 Vue 인스턴스** : 모든 Vue 애플리케이션의 중심에 있는 것. 그냥 Vue 인스턴스라고도 합니다.

Vue 생성자인 *new Vue()*로 생성 가능합니다.
Vue 생성자는 HTML 서식을 컴파일하고, 인스턴스 데이터를 초기화하고, 데이터를 생성하고, 상호 작용을 가능케 하는 이벤트들을 바인딩하면서 애플리케이션을 가동시킵니다.

Vue 생성자 내부의 객체는 다양한 옵션들을 갖습니다. 
Ex) el, data, filters, methods 등

**el 옵션**   
: Vue가 애플리케이션을 적용할 DOM 요소를 지정합니다.

Vue 생성자를 특정 변수에 할당하여 인스턴스를 루트 Vue 인스턴스를 생성하면 해당 변수명으로 콘솔에서 접근할 수도 있고, $vm0이라는 이름으로도 콘솔에서 접근할 수 있습니다. 이렇게 Vue 인스턴스는 하나 이상의 참조를 가지고 있습니다.

**data 옵션**   
> 각 Vue 인스턴스는 data 객체에 있는 모든 속성을 프록시 처리 합니다.(공식 문서)

data 객체의 속성들은 자동적으로 Vue 인스턴스 객체 자체의 속성이 됩니다. <br>Proxy라는 단어는 '대신, 대리'라는 의미를 가지고 있고, 네트워크 기술에서는 프로토콜의 대리 응답 등에서 사용하는 개념입니다. <br>꼭 data 객체를 통해서가 아니라 Vue 인스턴스를 통해서 바로 data가 가지고 있는 속성에 접근할 수 있기에 공식 문서에서 '프록시 처리'라는 용어를 사용한 것으로 이해했습니다.
```
// 데이터 객체
var data = { a: 1 }

// Vue인스턴스에 데이터 객체를 추가합니다.
var vm = new Vue({
  data: data
})

// 같은 객체를 참조합니다!
vm.a === data.a // => true
```

#### 수염 구문으로 data 객체 속성을 바로 표현할수 도 있습니다
기본적으로 v-text라는 지시자를 사용하여 data 객체의 속성을 표현할 수 있습니다. <br>하지만 아래의 예시처럼 중괄호를 겹쳐 놓은 수염 구문으로 비교적 간단하게 HTML 요소 내에서 표현할 수도 있습니다.
```
<span v-text="msg"></span>
<!-- 같습니다 -->
<span>{{msg}}</span>
```

#### Vue는 자동으로 각 데이터 객체의 속성에 getter와 setter 함수를 생성

data객체 내부의 속성은 해당 Vue 인스턴스가 할당될 `변수명.속성이름`으로 바로 접근할 수도 있고, `변수명.data.속성이름`로 접근할 수도 있다. ⇒ getter

`변수명.속성이름 = 원하는 값` 이런 방식으로 새로운 값을 넣어줄 수 있다. ⇒ setter

그냥 일반적으로 자바스크립트 객체 하나 만들어서 키/밸류 쌍 하나 추가하면 위와 같이 똑같이 동작한다. Vue 인스턴스의 data 객체도 그냥 자바스크립트 객체라는 것이다. 하지만, getter나 setter가 동작할 때 Vue에서는 watcher라는 인스턴스에 또 알려지게 되는 것이 주목해야할 점.

setter의 경우 트리거될 때마다 watcher에 알려지고 컴포넌트가 다시 렌더링 된다고 한다.(by 공식문서)


## 2.2 Vue 생명 주기


라이프사이클 훅 총 8가지 메소드 사용 가능

- beforeCreate
- created
- beforeMount
- mounted
- beforeUpdate
- updated
- beforeDestroy
- destroyed

![./images/lifecycle.png](./images/lifecycle.png)

## 2.3 Vue 인스턴스에 데이터 추가

수염 구문은 HTML 속성에서 사용할 수없다. v-bind 사용하여 HTML 속성을 바인딩할 수 있다. 

Ex) v-bind:src, v-bind:class

그런데 v-bind빼고 :src, :class 이런식으로 사용할 수도 있다.

이해 안 되는 부분(이해 완료) : 

v-once 디렉티브를 사용하여 데이터 변경 시 업데이트 되지 않는 일회성 보간을 수행할 수 있지만, 같은 노드의 바인딩에도 영향을 미친다는 점을 유의해야 합니다.(공식 문서의 템플릿 문법 중에서)

    <span v-once>다시는 변경하지 않습니다: {{ msg }}</span>

=> **_같은 태그 내에서의 다른 바인딩이나 자식 노드의 바인딩도 v-once를 사용 시 일회성 보간이 적용된다는 얘기_**


## 2.4 출력 필터 적용

화면에 표시되는 data 객체의 값을 필터시켜서 표시하려면 Vue 인스턴스의 filters 객체를 사용해야 한다. 

filters 객체 내에서 원하는 필터를 위한 함수를 제작하면, 그 함수를 수염 스타일의 바인딩(아래 코드 참고)을 사용하여 적용할 수 있다. *이렇게 제작된 필터 함수는 v-text 바인딩으로 적용할 수는 없다.*

    <p class="price">
        {{product.price | formatPrice}}
    </p>


---
### <u>이해가 어려운 파트</u>
#### 왜 인스턴스에 대한 참조가 하나 이상 필요할까?(2.1.2에 있는 Note)
> 같은 인스턴스에 접근하는 방법이 중복되는 것처럼 보일 수 있지만, 둘 다 있으면 도움이 됩니다.
> websotre 전역 변수에 루트 Vue 인스턴스를 할당했을 때 웹 페이지 내 다른 자바스크립트 코드에서 애플리케이션을 참조하는 방법을 만든 것입니다. 이렇게 하면 애플리케이션을 참조해야 하는 다른 라이브러리, 프레임워크, 우리 코드에 통합할 수 있습니다.


> $vm0 변수에 할당된 뷰 인스턴스는 현재 vue-devtools에서 선택된 인스턴스를 반영합니다. 애플리케이션이 인스턴스 수백 개, 수천 개로 만들어져 있을 때 각 인스턴스에 변수를 선언하는 것은 실용적이지 않습니다.

=> 아직 Vue를 사용한 규모가 있는 프로젝트의 구조를 몰라서 그런 부분도 있어서 그런지 위 내용이 제대로 이해되지는 않습니다. <u>그래서 우선은 나름대로 vue-devtools로 뷰 프로젝트를 관리하기 위해서 각각의 뷰 인스턴스에 대한 또다른 참조를 만들어낸 것으로 이해했습니다. 변수에 할당되지 않은 뷰 인스턴스도 존재할 수 있기 때문에 vue-devtools에서 관리되려면 다른 방식의 참조가 필요할 것이라고 생각합니다.</u>


---
### 참고 자료
- [Vue 인스턴스(공식 문서)](https://kr.vuejs.org/v2/guide/instance.html)
- [템플릿 문법(공식 문서)](https://kr.vuejs.org/v2/guide/syntax.html)


